CREATE DATABASE BANK_MANAGEMENTS_2;
USE BANK_MANAGEMENTS_2;
CREATE TABLE BANK_MANAGEMENT(MANAGER_ID INT PRIMARY KEY,MANAGER_F_NAME CHAR(30), MANAGER_l_NAME CHAR(10),
MANAGER_DEPT VARCHAR(30),MANAGER_ACCOUNT_NO INT , MANAGER_BRANCH VARCHAR(40),BRANCH_ID INT);
#FOREIGN KEY (CUSTOMER_ID) REFERENCES 
-- DROP TABLE CUSTOMERS;

INSERT INTO BANK_MANAGEMENT(MANAGER_ID, MANAGER_F_NAME,MANAGER_l_NAME, MANAGER_DEPT, MANAGER_ACCOUNT_NO, MANAGER_BRANCH,BRANCH_ID) VALUES
(1001,"SRIRAM","M","ACCOUNTER",9876089,"INDIAN BANK",76545),
(1002,"CHANDRU","M","FINANCIAL",4567654,"STATE BANK OF INDIA",23432),
(1003, 'John', 'Doe', 'Finance', '123456789', 'New York', 101),
(1004, 'Jane', 'Smith', 'HR', '987654321', 'Los Angeles', 102),
(1005, 'Michael', 'Johnson', 'Sales', '555555555', 'Chicago', 103),
(1006, 'Emily', 'Davis', 'Marketing', '777777777', 'Houston', 104),
(1007, 'Robert', 'Wilson', 'IT', '999999999', 'San Francisco', 105),
(1008, 'Sarah', 'Anderson', 'Operations', '111111111', 'Miami', 106),
(1009, 'David', 'Lee', 'Engineering', '222222222', 'Boston', 107);
SELECT* FROM BANK_MANAGEMENT;


CREATE TABLE CUSTOMER(CUSTOMER_ID INT PRIMARY KEY, FIRST_NAME CHAR(30), LAST_NAME CHAR(20), CUSTOMER_BANK VARCHAR(30),
CUSTOMER_AC_NO INT,CUSTOMER_BRANCH VARCHAR(30), EMAIL_ID VARCHAR(30),PHONE_NO DOUBLE,MANAGER_ID INT,FOREIGN KEY(MANAGER_ID) REFERENCES
BANK_MANAGEMENT(MANAGER_ID));

INSERT INTO CUSTOMER(CUSTOMER_ID,FIRST_NAME,LAST_NAME,CUSTOMER_BANK,CUSTOMER_AC_NO, CUSTOMER_BRANCH,EMAIL_ID,PHONE_NO)VALUES
    (1, "SRI","RAM","INDIAN BANK",123456,"branch2","srirambsc56@gmail.com",765434567898),
    (2, "RAM","CHARN","BANK OF BARODA", 234543,"branch9","ramcharn22@gmail.com",987654324578),
    (3, 'Michael', 'Johnson', 'Bank C', '576755555', 'Branch 3', 'michael.johnson@email.com', '55512155'),
    (4, 'Emily', 'Davis', 'Bank D', '789977', 'Branch 4', 'emily.davis@email.com', '555345777'),
    (5, 'Robert', 'Wilson', 'Bank E', '999569', 'Branch 5', 'robert.wilson@email.com', '55523299'),
    (6, 'Sarah', 'Anderson', 'Bank F', '11565111', 'Branch 6', 'sarah.anderson@email.com', '555233111'),
    (7, 'David', 'Lee', 'Bank G', '2227622', 'Branch 7', 'david.lee@email.com', '5557892222'),
    (8, 'Olivia', 'Brown', 'Bank H', '3378333', 'Branch 8', 'olivia.brown@email.com', '5557873333'),
    (9, 'Daniel', 'Taylor', 'Bank I', '4564444', 'Branch 9', 'daniel.taylor@email.com', '555774444'),
    (10, 'Sophia', 'Johnson', 'Bank J', '89666666', 'Branch 10', 'sophia.johnson@email.com', '55564366');



CREATE TABLE ACCOUNTS(ACCOUNT_ID INT PRIMARY KEY ,CUSTOM_ID INT , ACCOUNT_TYPE VARCHAR(30),
MIN_BALANCE DECIMAL(10,2) , MAX_BALANCE DECIMAL(10,2),CUSTOMER_ID INT, FOREIGN KEY(CUSTOMER_ID) REFERENCES
CUSTOMER(CUSTOMER_ID));

INSERT INTO ACCOUNTS(ACCOUNT_ID, CUSTOM_ID, ACCOUNT_TYPE, MIN_BALANCE, MAX_BALANCE) VALUES
    (101, 101, 'Savings', 1000.00, 10000.00),
    (102, 102, 'Checking', 500.00, 5000.00),
    (103, 103, 'Savings', 1500.00, 15000.00),
    (104, 104, 'Checking', 750.00, 7500.00),
    (105, 105, 'Savings', 2000.00, 20000.00),
    (106, 106, 'Checking', 1000.00, 10000.00),
    (107, 107, 'Savings', 2500.00, 25000.00),
    (108, 108, 'Checking', 1250.00, 12500.00),
    (109, 109, 'Savings', 3000.00, 30000.00),
    (120,2001,"SAVINGS",500.00, 5000.80),
    (121,2002,"CHECKING",500.00,4000.00),
    (122, 110, 'Checking', 1500.00, 15000.00);
    SELECT * FROM ACCOUNTS;


CREATE TABLE TRANSACTIONS(TRANSACTION_ID INT PRIMARY KEY , ACCOUNT_ID INT,TRANSACTION_DATE DATE ,AMOUNT DECIMAL(10,00),
PAYMENT_ID INT ,FOREIGN KEY(PAYMENT_ID) REFERENCES PAYMENTS(PAYMENT_ID));

INSERT INTO  TRANSACTIONS(TRANSACTION_ID ,ACCOUNT_ID, TRANSACTION_DATE,AMOUNT) VALUES
    (1001, 1, '2023-09-18', 10000.00),
    (1002, 2, '2023-09-19', 2500.00),
    (1003, 3, '2023-09-20', 5009.00),
    (1004, 4, '2023-09-21', 7500.50),
    (1005, 5, '2023-09-22', 1000.00),
    (1006, 6, '2023-09-23', 3000.00),
    (1007, 7, '2023-09-24', 7500.00),
    (1008, 8, '2023-09-25', 2000.00),
    (1009, 9, '2023-09-26', 50.00),
    (1010, 10, '2023-09-27', 400.00),
    (1012,45, "2023-05-19",5000.50),
    (1013, 4,"2023-07-20",10000.90);
    SELECT * FROM TRANSACTIONS;


CREATE TABLE LOANS(LOAN_ID INT PRIMARY KEY,CUSTOMER_ID INT, ACCOUNT_NO INT,LOAN_AMOUNT DECIMAL(10,2), INTREST_RATE DECIMAL(10,2),MANAGER_ID INT,
FOREIGN KEY (MANAGER_ID) REFERENCES BANK_MANAGEMENT(MANAGER_ID));

INSERT INTO LOANS(LOAN_ID,CUSTOMER_ID,ACCOUNT_NO, LOAN_AMOUNT,INTREST_RATE) VALUES
    (11, 101, 1001, 5000.00, 5.0),
    (12, 102, 1002, 7500.00, 4.5),
    (13, 103, 1003, 10000.00, 6.0),
    (14, 104, 1004, 3000.00, 5.5),
    (15, 105, 1005, 8000.00, 4.0),
    (16, 106, 1006, 6000.00, 5.25),
    (17, 107, 1007, 12000.00, 6.5),
    (18, 108, 1008, 9500.00, 4.75),
    (19, 109, 1009, 2000.00, 5.75),
    (20, 110, 1010, 7000.00, 4.25),
	(21,567867,987654,50000.00,6.5),
    (23,56789,98765,480000.00,5.5);


CREATE TABLE PAYMENTS(PAYMENT_ID INT PRIMARY KEY , LOAN_ID INT , PAYMENT_DATE DATE ,TOTAL_AMOUNT DECIMAL(10,2),MANAGER_ID INT,
FOREIGN KEY (MANAGER_ID) REFERENCES BANK_MANAGEMENT(MANAGER_ID));

INSERT INTO PAYMENTS(PAYMENT_ID, LOAN_ID, PAYMENT_DATE, TOTAL_AMOUNT) VALUES
    (501, 101, '2023-09-18', 500.00),
    (502, 102, '2023-09-19', 750.00),
    (503, 103, '2023-09-20', 1000.00),
    (504, 104, '2023-09-21', 300.00),
    (505, 105, '2023-09-22', 800.00),
    (506, 106, '2023-09-23', 600.00),
    (507, 107, '2023-09-24', 1200.00),
    (508, 108, '2023-09-25', 950.00),
    (509, 109, '2023-09-26', 200.00),
    (510, 110, '2023-09-27', 700.00),
    (511,401,'2023-08-19',30000.00),
    (512,402,'2023-07-28',50000.00);
SELECT * FROM PAYMENTS;
CREATE TABLE Interest_Rates (Rate_ID INT PRIMARY KEY,Account_Type VARCHAR(30),Loan_Type VARCHAR(30),
Interest_Rate DECIMAL(5, 2),Effective_Date DATE,LOAN_ID INT,FOREIGN KEY(LOAN_ID) REFERENCES LOANS(LOAN_ID));
-- Insert sample interest rate data
INSERT INTO Interest_Rates (Rate_ID, Account_Type, Loan_Type, Interest_Rate, Effective_Date)
VALUES
    (01, 'Savings', NULL, 0.50, '2023-01-01'),
    (02, 'Checking', NULL, 0.25, '2023-01-01'),
    (03, NULL, 'Personal Loan', 5.75, '2023-01-01'),
    (04, NULL, 'Mortgage Loan', 3.75, '2023-01-01');

CREATE TABLE Security_Logs (Log_ID INT PRIMARY KEY,User_ID INT,Action VARCHAR(100),Timestamp DATETIME,IP_Address VARCHAR(20),
MANAGER_ID INT, FOREIGN KEY(MANAGER_ID) REFERENCES BANK_MANAGEMENT(MANAGER_ID));
-- Insert sample security log data
INSERT INTO Security_Logs (Log_ID, User_ID, Action, Timestamp, IP_Address)
VALUES
    (001, 101, 'Login', '2023-09-18 10:15:00', '192.168.1.100'),
    (002, 102, 'Password Change', '2023-09-19 14:30:00', '192.168.1.101'),
    (003, 103, 'Access Denied', '2023-09-20 09:45:00', '192.168.1.102'),
    (004, 104, 'Access Granted', '2023-09-21 16:20:00', '192.168.1.103');

CREATE TABLE Audit_Trails (Audit_ID INT PRIMARY KEY,User_ID INT,Table_Name VARCHAR(50),Action VARCHAR(100),Timestamp DATETIME,
Old_Values TEXT, New_Values TEXT,MANAGER_ID INT, FOREIGN KEY(MANAGER_ID) REFERENCES
BANK_MANAGEMENT(MANAGER_ID));

-- Insert sample audit trail data
INSERT INTO Audit_Trails (Audit_ID, User_ID, Table_Name, Action, Timestamp, Old_Values, New_Values)
VALUES
    (10001, 101, 'Accounts', 'Update', '2023-09-18 11:30:00', 'Old balance: $1000.00', 'New balance: $1200.00'),
    (20001, 102, 'Customers', 'Insert', '2023-09-19 15:45:00', NULL, 'New customer: John Smith'),
    (30001, 103, 'Loans', 'Delete', '2023-09-20 12:00:00', 'Deleted loan: Loan ID 1234', NULL),
    (40001, 104, 'Transactions', 'Insert', '2023-09-21 17:10:00', NULL, 'New transaction: Deposit $500.00');




